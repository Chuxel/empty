name: Test Buildx

on: 
  workflow_dispatch:
  #push:
  #  branches: [actions-test]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      id: checkout
      uses: actions/checkout@v1
    - name: Test buildx
      run: |
        docker buildx create --use --name vscode-dev-containers
        docker run --privileged --rm tonistiigi/binfmt --install all
        docker buildx ls
        # cd .devcontainer
        # docker buildx build --platform linux/arm64,linux/amd64 -f base.Dockerfile .
        docker buildx build --platform linux/amd64 -f .devcontainer/base.Dockerfile .

